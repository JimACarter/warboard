<!DOCTYPE html>
<html lang="en">
<head>
  <title>Dogsbody Technology Dashboard</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="refresh" content="{{ refresh }}; url=/">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="/static/css/warboard.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</head>
<body>
  <!-- <div id="fixed-element" style="position:fixed; bottom:40px; right: 40px; z-index: 999">
    <img src="/tools/static/images/DBtech.png" width="400" height="126" alt="Dogsbody Technology" />
  </div> -->
  <div class="container-fluid">
  <div class="row">
    <div class="col-sm-4">
      <h1>Pingdom</h1>
      <div class="progress">
        <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ down }}%"></div>
        <div class="progress-bar progress-bar-info" role="progressbar" style="width:{{ paused }}%"></div>
        <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ up }}%"></div>
      </div>
      <table class="table">
        <thead>
          <tr class="lead"><th>Name</th><th>Type</th><th>Response</th></tr>
        </thead>
        <tbody>
        {% for check in checks|sort(attribute='lastresponsetime')|reverse %}
          {% if check['status'] == 'down' %}
		  <tr class="danger lead"><td>{{ check['name'] }}</td><td>{% filter upper %}{{ check['type'] }}{% endfilter %}</td><td>{{ check['lastresponsetime'] }} ms</td></tr>
		  {% endif %}
		{% endfor %}
		{% for check in checks|sort(attribute='lastresponsetime')|reverse %}
		  {% if check['status'] == 'paused' %}
		  <tr class="info lead"><td>{{ check['name'] }}</td><td>{% filter upper %}{{ check['type'] }}{% endfilter %}</td><td>{{ check['lastresponsetime'] }} ms</td></tr>
		  {% endif %}
		{% endfor %}
		{% for check in checks|sort(attribute='lastresponsetime')|reverse %}
		  {% if check['status'] == 'up' %}
		  <tr class="success lead"><td>{{ check['name'] }}</td><td>{% filter upper %}{{ check['type'] }}{% endfilter %}</td><td>{{ check['lastresponsetime'] }} ms</td></tr>
		  {% endif %}
		{% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-sm-5">
      <h1>NewRelic</h1>
      <div class="progress">
        <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ red }}%"></div>
        <div class="progress-bar progress-bar-warning" role="progressbar" style="width:{{ orange }}%"></div>
        <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ green }}%"></div>
        <div class="progress-bar progress-bar-info" role="progressbar" style="width:{{ blue }}%"></div>
      </div>
      <table class="table">
        <thead>
          <tr class="lead"><th>Name</th><th>CPU</th><th>Memory</th><th>Disk IO</th><th>Disk Space</th></tr>
        </thead>
        <tbody>
        {% for check in nrData|sort(attribute='links')|reverse %}
          {% if check['health_status'] == 'red' %}
		  <tr class="danger lead"><td>{{ check['name'] }}</td><td>{{ check['summary']['cpu'] }}%</td><td>{{ check['summary']['memory'] }}%</td><td>{{ check['summary']['disk_io'] }}%</td><td>{{ check['summary']['fullest_disk'] }}%</td></tr>
		  {% endif %}
		{% endfor %}
		{% for check in nrData|sort(attribute='links')|reverse %}
          {% if check['health_status'] == 'orange' %}
		  <tr class="warning lead"><td>{{ check['name'] }}</td><td>{{ check['summary']['cpu'] }}%</td><td>{{ check['summary']['memory'] }}%</td><td>{{ check['summary']['disk_io'] }}%</td><td>{{ check['summary']['fullest_disk'] }}%</td></tr>
		  {% endif %}
		{% endfor %}
		{% for check in nrData|sort(attribute='links')|reverse %}
          {% if check['health_status'] == 'green' %}
		  <tr class="success lead"><td>{{ check['name'] }}</td><td>{{ check['summary']['cpu'] }}%</td><td>{{ check['summary']['memory'] }}%</td><td>{{ check['summary']['disk_io'] }}%</td><td>{{ check['summary']['fullest_disk'] }}%</td></tr>
		  {% endif %}
		{% endfor %}
		{% for check in nrData|sort(attribute='name') %}
          {% if check['links'] == 'blue' %}
		  <tr class="info lead"><td>{{ check['name'] }}</td><td></td><td></td><td></td><td></td></tr>
		  {% endif %}
		{% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-sm-3">
      <h1>Sirportly Queues</h1>
      <div class="progress">
        <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ redPercent }}%"></div>
        <div class="progress-bar progress-bar-warning" role="progressbar" style="width:0%"></div>
        <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ greenPercent }}%"></div>
      </div>
      <table class="table table-bordered">
        <tbody>
          <tr class="lead">
            <td class="col-sm-4">New <span class="pull-right">{{ unassigned }}</span></td>
            <td class="col-sm-8">
              <div class="progress">
                <div class="progress-bar progress-bar-warning" role="progressbar" style="width:{{ unassigned * multiplier }}%"></div>
              </div>
            </td>
          </tr>
          <tr class="lead">
            <td class="col-sm-4">Dan <span class="pull-right">{{ danTotal }}</span></td>
            <td class="col-sm-8">
              <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ danRed * multiplier }}%"></div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ danGreen * multiplier }}%"></div>
              </div>
            </td>
          </tr>
          <tr class="lead">
            <td class="col-sm-4">Alex <span class="pull-right">{{ alexTotal }}</span></td>
            <td class="col-sm-8">
              <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ alexRed * multiplier }}%"></div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ alexGreen * multiplier }}%"></div>
              </div>
            </td>
          </tr>
          <tr class="lead">
            <td class="col-sm-4">Rob <span class="pull-right">{{ robTotal }}</span></td>
            <td class="col-sm-8">
              <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ robRed * multiplier }}%"></div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ robGreen * multiplier }}%"></div>
              </div>
            </td>
          </tr>
          <tr class="lead">
            <td class="col-sm-4">Gary <span class="pull-right">{{ garyTotal }}</span></td>
            <td class="col-sm-8">
              <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ garyRed * multiplier }}%"></div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ garyGreen * multiplier }}%"></div>
              </div>
            </td>
          </tr>
          <tr class="lead">
            <td class="col-sm-4">Claire <span class="pull-right">{{ claireTotal }}</span></td>
            <td class="col-sm-8">
              <div class="progress">
                <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{ claireRed * multiplier }}%"></div>
                <div class="progress-bar progress-bar-success" role="progressbar" style="width:{{ claireGreen * multiplier }}%"></div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <h1>Calendar</h1>
      {% for item in calendarData %}
      <h3>{{ item['start']['date'] }}</h3>
      <ul class="list-group">
        <li class="list-group-item list-group-item-info lead">{{ item['summary']|safe }}</li>
      </ul>
      {% endfor %}
    </div>
  </div>
</div>
</body>
</html>
